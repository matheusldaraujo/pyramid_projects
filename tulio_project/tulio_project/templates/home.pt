<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:define-macro="layout">
    <head>
        <title>Tulio Campos</title>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="3D Wall Gallery" />
        <meta name="keywords" content="jquery, perspective, 3D, webkit, safari, gallery, images, thumbnails, slider"/>
		<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/>
		<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/ui-lightness/jquery.ui.theme.css" type="text/css" media="all" />
		<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/ui-lightness/jquery.ui.core.css" type="text/css" media="all" />
		<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/ui-lightness/jquery.ui.slider.css" type="text/css" media="all" />
		<link rel="stylesheet" href="static/css/style.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="static/css/thumbnail_slider.css" type="text/css" media="screen"/>
    </head>
    <body>
		<div class="header">
			<h1>Tulio Campos Portifólio</h1> 
			<!-- <div class="loginButton reference" tal:condition="not: logged"><a class="insideText" href="/login">Login</a></div>
			<div class="loginButton reference" tal:condition="logged"><a class="insideText" href="/add_files">+ Desenhos</a></div>
			<div class="loginButton reference" tal:condition="logged"><a class="insideText" href="/logout">Logout</a></div>
			<div id="pg_scrollWrapper" class="pg_scrollWrapper"> -->
			<div id="pg_scrollWrapper" class="pg_scrollWrapper">
				<div id="slider" class="slider"></div>
			</div>

			<a tal:condition="not: logged" href="#login-box" class="login-window insideText">Login</a>
			<a tal:condition="logged" href="#upload-box" class="upload-window insideText">+ Desenhos</a>
			<a tal:condition="logged" class="insideText" href="/logout">Logout</a>
			<a  href="#contact-box" class="contact-window insideText">Contato</a>
			<a class="reference" href="http://tympanus.net/codrops/" target="_blank">designed By Mary Lou</a>
<span class="like-button"><iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fmatheus-araujo.com%2Fminhaimagem&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=true&amp;font&amp;colorscheme=light&amp;action=like&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe></span>
<!-- 			<a class="reference" href="http://www.matheus-araujo.com" target="_blank">designed by Matheus Araujo</a> -->
		</div>
		<!-- =================================================
				WALL 
			 =================================================
		 -->
		<div class="wall">
			<div id="pg_container" class="pg_container">
				<ul id="pg_photos" class="pg_photos"><!-- calculate top-->
					<li tal:repeat="image listThumbs"><a href="#${repeat.image.number}"><img class="bigDraw" src="${image.url}" alt="${image.mtime}"/></a></li>
				</ul>
				

			</div>
		</div>
		<!-- =================================================
				LOGO
			 =================================================
		 -->
		<div class="marcaDiv">
			<img class="marca" src="/static/images/marcatransparenteSmall.png"/>
		</div>
		<!-- =================================================
				LOGIN SCREEN
			 =================================================
		 -->
		<div id="login-box" class="login-popup">
	        <a href="#" class="close" style="color:white">X</a>
	          <form method="post" class="signin" action="#">
	                <fieldset class="textbox">
	            	<label class="username">
	                <span>Login</span>
	                <input type="text" name="login" value="${login}" id="username" autocomplete="on" placeholder="Username"/>
	                </label>
	                <label class="password">
	                <span>Senha</span>
	                <input type="password" name="password" value="${password}" placeholder="Password"/>
	                </label>
	                <button type="submit" name="login.submitted" value="Log In" class="submit button">Entrar</button>
	                </fieldset>
	          </form>
		</div>
		<!-- =================================================
				UPLOAD SCREEN
			 =================================================
		 -->
		 <div id="upload-box" class="upload-popup">
	        <a href="#" class="close" style="color:white">X</a>
	          <form action="/store_mp3_view" method="post" accept-charset="utf-8" enctype="multipart/form-data" class="signin" id="uploadForm">
			    <fieldset class="textbox">
			    	<br/>
	            	<label for="imgs">Selecione as images para upload:</label>
			    	<span id="uploadMask">
			    		<input id="imgs" name="imgs" type="file" class="hide" accept="image/*" multiple/>
			    		<!-- Button to invoke the click of the File Input -->
    					<button type="button" class="submit button uploadButton" style="background: -webkit-gradient(linear, left top, left bottom, from(#f3f3f3), to(rgb(124, 124, 124)))" id="fake" name="fake" onclick="HandleFileButtonClick();" value="Upload File">Clique aqui para fazer upload</button>
			    	</span>
			    	<input id="nome" type="hidden" value="figuras" />
			    	<button type="submit" class="submit button" value="Enviar" onclick="HandleFileSubmitClick();">Enviar</button>
			    	<img src="/static/images/loading.gif" class="loading hide"/>
	            </fieldset>
			</form>
		</div>
		<!-- =================================================
				CONTACT SCREEN
			 =================================================
		 -->
		<div id="contact-box" class="contact-popup">
	        <a href="#" class="close" style="color:white">X</a>
	          <form method="post" class="signin" accept-charset="utf-8" action="/send_email">
	                <fieldset class="textbox">
	            	<label class="username">
	                <span>Nome:</span>
	                <input type="text" name="name" value="" id=""/>
	                </label>
	            	<label class="username">
	                <span>Email:</span>
	                <input type="text" name="email" value="seu@email.com" id="email">
	                </label>
	                <label class="textbox">
	                <span>Assunto:</span>
	                <input type="text" name="assunto" value=""/>
	                </label>
	                <label class="textbox">
	                <span>Conteúdo:</span>
	                <textarea name="content_message" class="textbox" rows="5" cols="60" value="Here's some text."></textarea>
	                </label>
	                <button type="submit" name="contact.submitted" value="Log In" class="submit button">Envar</button>
	                </fieldset>
	          </form>
		</div>
		<!-- =================================================
				FOOTER
			 =================================================
		 -->
		<div class="footer">
			<a class="back left" href="http://www.pylonsproject.org/"> <img src="/static/images/pyramid_powered_148x45.png" /></a>
			<div class="thumbnailSlider" id="thumbnailSlider">
				<ul class="ts_container">
					<li tal:repeat="image listImages"><a href="#${repeat.image.number}">${image.name}</a></li>
					<li class="ts_thumbnails">
						<div class="ts_preview_wrapper">
							<ul class="ts_preview">
								<li tal:repeat="image listSmallThumbs"><img class="bigDraw" src="${image.url}" alt="${image.name}"/></li>
							</ul>
						</div>
						<span></span>
					</li>
				</ul>
			</div>
			<a class="back right" href="http://www.matheus-araujo.com">development by Matheus Araújo</a>
		
		</div>
		<!-- =================================================
				JAVASCRIPT
			 =================================================
		 -->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
		<script type="text/javascript" src="static/js/jquery.easing.1.3.js"></script>
		<script type="text/javascript" src="static/js/jquery.ba-hashchange.min.js"></script>
		<script type="text/javascript" src="static/js/jquery-mousewheel-3.0.4/jquery.mousewheel.min.js"></script>
		

        <script type="text/javascript">
			/*
			the images preload plugin
			*/
			(function($) {
				$.fn.preload = function(options) {
					var opts 	= $.extend({}, $.fn.preload.defaults, options);
					o			= $.meta ? $.extend({}, opts, this.data()) : opts;
					var c		= this.length,
						l		= 0;
					return this.each(function() {
						var $i	= $(this);
						$('<img/>').load(function(i){
							++l;
							if(l == c) o.onComplete();
						}).attr('src',$i.attr('src'));	
					});
				};
				$.fn.preload.defaults = {
					onComplete	: function(){return false;}
				};
			})(jQuery);
		</script>
		<script type="text/javascript">
			//=========================================
			//Change cursor in right button textarea
			//=========================================
			$("textarea").mousemove(function(e) {
		        var myPos = $(this).offset();
		        myPos.bottom = $(this).offset().top + $(this).outerHeight();
		        myPos.right = $(this).offset().left + $(this).outerWidth();
		        
		        if (myPos.bottom > e.pageY && e.pageY > myPos.bottom - 16 && myPos.right > e.pageX && e.pageX > myPos.right - 16) {
		            $(this).css({ cursor: "nw-resize" });
		        }
		        else {
		            $(this).css({ cursor: "" });
		        }
		    })

		    //=========================================
		    //Gallery Javascript core
		    //=========================================
			$("#imgs").change(function() { 
				$("#fake")[0].innerHTML = "Upload: " + $("#imgs")[0].files.length + " Imagens"
			});
			function HandleFileButtonClick()
			  {
			    $("#imgs")[0].click();
			  }
			function HandleFileSubmitClick()
			  {
			    $(".loading")[0].className = "loading";
			  }
			/*
			the thumbnail slider plugin
			*/
			(function($) {
				
				var methods = {
					init 	: function(options) {
					var opts = $.extend({}, $.fn.thumbnailSlider.defaults, options);
					return this.each(function() {
						var $this 				= $(this),
						o 					= $.meta ? $.extend({}, opts, $pxs_container.data()) : opts;

						var $ts_container		= $this.children('.ts_container'),
						$ts_thumbnails		= $ts_container.children('.ts_thumbnails'),
						$nav_elems			= $ts_container.children('li').not($ts_thumbnails),
						total_elems			= $nav_elems.length,
						$ts_preview_wrapper	= $ts_thumbnails.children('.ts_preview_wrapper'),
						$arrow				= $ts_thumbnails.children('span'),
						$ts_preview			= $ts_preview_wrapper.children('.ts_preview');

						/*
						calculate sizes for $ts_thumbnails:
						width 	-> width thumbnail + border (2*5)
						height 	-> height thumbnail + border + triangle height(6)
						top		-> -(height plus margin of 5)
						left	-> leftDot - 0.5*width + 0.5*widthNavDot
							this will be set when hovering the nav,
							and the default value will correspond to the first nav dot
						 */
						var w_ts_thumbnails	= o.thumb_width + 2*5,
						h_ts_thumbnails	= o.thumb_height + 2*5 + 6,
						t_ts_thumbnails	= -(h_ts_thumbnails + 5),
						$first_nav		= $nav_elems.eq(0),
						l_ts_thumbnails	= $first_nav.position().left - 0.5*w_ts_thumbnails + 0.5*$first_nav.width();

						$ts_thumbnails.css({
							width	: w_ts_thumbnails + 'px',
							height	: h_ts_thumbnails + 'px',
							top		: t_ts_thumbnails + 'px',
							left	: l_ts_thumbnails + 'px'
						});

						/*
						calculate the top and left for the arrow of the tooltip
						top		-> thumb height + border(2*5)
						left	-> (thumb width + border)/2 -width/2
						 */
						var t_arrow	= o.thumb_height + 2*5,
						l_arrow	= (o.thumb_width + 2*5) / 2 - $arrow.width() / 2;
						$arrow.css({
							left	: l_arrow + 'px',
							top		: t_arrow + 'px'
						});

						/*
						calculate the $ts_preview width -> thumb width times number of thumbs
						 */
						$ts_preview.css('width' , total_elems*o.thumb_width + 'px');

						/*
						set the $ts_preview_wrapper width and height -> thumb width / thumb height
						 */
						$ts_preview_wrapper.css({
							width	: o.thumb_width + 'px',
							height	: o.thumb_height + 'px'
						});

						//hover the nav elems
						$nav_elems.bind('mouseenter',function(){
							var $nav_elem	= $(this),
							idx			= $nav_elem.index();

							/*
							calculate the new left
							for $ts_thumbnails
							 */
							var new_left	= $nav_elem.position().left - 0.5*w_ts_thumbnails + 0.5*$nav_elem.width();

							$ts_thumbnails.stop(true)
							.show()
							.animate({
								left	: new_left + 'px'
							},o.speed,o.easing);

							/*
							animate the left of the $ts_preview to show the right thumb
							 */
							$ts_preview.stop(true)
							.animate({
								left	: -idx*o.thumb_width + 'px'
							},o.speed,o.easing);

							//zoom in the thumb image if zoom is true
							if(o.zoom && o.zoomratio > 1){
								var new_width	= o.zoomratio * o.thumb_width,
								new_height	= o.zoomratio * o.thumb_height;

								//increase the $ts_preview width in order to fit the zoomed image
								var ts_preview_w	= $ts_preview.width();
								$ts_preview.css('width' , (ts_preview_w - o.thumb_width + new_width)  + 'px');

								$ts_preview.children().eq(idx).find('img').stop().animate({
									width		: new_width + 'px',
									height		: new_height + 'px'
								},o.zoomspeed);
							}

						}).bind('mouseleave',function(){
							//if zoom set the width and height to defaults
							if(o.zoom && o.zoomratio > 1){
								var $nav_elem	= $(this),
								idx			= $nav_elem.index();
								$ts_preview.children().eq(idx).find('img').stop().css({
									width	: o.thumb_width + 'px',
									height	: o.thumb_height + 'px'
								});
							}

							$ts_thumbnails.stop(true)
							.hide();

						}).bind('click',function(e){
							var $nav_elem	= $(this),
							idx			= $nav_elem.index();
							$nav_elems.removeClass('selected').eq(idx).addClass('selected');
							o.onClick(idx);
								//e.preventDefault();
						});
					});
					},
					update 	: function(idx) {
						return this.each(function(){
							var $this 			= $(this),
								$ts_container	= $this.children('.ts_container'),
								$ts_thumbnails	= $ts_container.children('.ts_thumbnails'),
								$nav_elems		= $ts_container.children('li').not($ts_thumbnails);
							$nav_elems.removeClass('selected').eq(idx).addClass('selected');
						});	
					}
				};
				
				$.fn.thumbnailSlider = function(method) {
					if ( methods[method] ) {
						return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
					} else if ( typeof method === 'object' || ! method ) {
						return methods.init.apply( this, arguments );
					} else {
						$.error( 'Method ' +  method + ' does not exist on jQuery.thumbnailSlider' );
					}  
				};
				$.fn.thumbnailSlider.defaults = {
					speed		: 100,//speed of each slide animation
					easing		: 'jswing',//easing effect for the slide animation
					thumb_width	: 75,//your photos width
					thumb_height: 75,//your photos height
					zoom		: false,//zoom animation for the thumbs
					zoomratio	: 1.3,//multiplicator for zoom (must be > 1)
					zoomspeed	: 15000,//speed of zoom animation
					onClick		: function(){return false;}//click callback
				};
			})(jQuery);
		</script>
		<script type="text/javascript">
			//=========================================
		    //Modal LOGIN UPLOAD CONTACT
		    //=========================================

			$(function() {
				var $thumbnailSlider= $('#thumbnailSlider'),
					$slider			= $('#slider'),
					$pg_photos		= $('#pg_photos'),
					$pg_container	= $('#pg_container'),
					$pg_scrollWrapper	= $('#pg_scrollWrapper'),
					$pg_photos_elem	= $pg_photos.children(),
					$pg_photos_img	= $pg_photos_elem.find('img'),
					is_safari = navigator.userAgent.toLowerCase().indexOf('safari') > -1 
								&& 
									  navigator.userAgent.toLowerCase().indexOf('chrome') == -1,
					pg_photos_width	= 0;				  
				
				//preload the images				
				$pg_photos_img.preload({
					onComplete	: function(){
						init();
						//force the hashchange event
						//so that it slides to the image passed in the url
						$(window).hashchange();
					}
				});
				function init(){
					initThumbnailSlider();
					configGallery();
					initSlider();
					initEvents();
				}
				//init the thumbs slider plugin
				function initThumbnailSlider(){
					$thumbnailSlider.thumbnailSlider({
							thumb_width	: 75,
						thumb_height: 75
						});
				}
				function configGallery(){
					$('BODY').css('overflow-x','hidden');
					//we need to set the width of the $pg_photos,
					//which is the sum of its childrens width
						$pg_photos.children().each(function(){
							pg_photos_width += $(this).outerWidth(true);
						});
						$pg_photos.css('width',pg_photos_width+'px');
				}
				function initSlider(){
					$pg_scrollWrapper.show();
						//innitialize the slider
					var old_value 	= 0, //last value of the slider
						dir			= 1; //direction 	
						$slider.slider('destroy').slider({
							orientation	: 'horizontal',
							max			: pg_photos_width - $pg_photos.children(':last').outerWidth(true),
							min			: 0,
							value		: 0,
							slide		: function(event, ui) {
								$pg_photos.css('left',-ui.value+'px');						
							//the 3d effect
								if(is_safari){
								//the dir will define the value for the rotationY (negative or positive)
								dir 		= (old_value < ui.value) ? 1 : -1;
								old_value 	= ui.value;	
									if(dir == 1 && !$pg_container.hasClass('turnLeft'))	
									$pg_container.addClass('turnLeft')
												 .removeClass('turnRight flat');
									else if(dir == -1 && !$pg_container.hasClass('turnRight'))	
									$pg_container.addClass('turnRight')
												 .removeClass('turnLeft flat');
								}	
							},
							stop: function(event, ui) {
								if(is_safari){
									$pg_container.addClass('flat')
											 .removeClass('turnLeft turnRight');
								}			 
							}
						});
				}
				function addCommentHandler(){

					  		$(this).unbind('click')
					  		$(this).find(".addComment").html("<form>\
					  		<span style=\"position:relative;top:-20%;padding: 5px;\">Nome:\
	                		<input type=\"text\" name=\"comment\" style=\"float:right\" value=\"\"/>\<br\><br\>\
	                		<span style=\"position:relative;top:-20%;padding: 5px;\">Comentário:\
	                		<input type=\"text\" name=\"comment\" style=\"float:right\" value=\"\"/>\
	                		<input type=\"submit\" name=\"addcomments.form\" value=\"Submit\" />\
	            	   		</form>")
				}
				//=============================
				//Enter submit addcomment form
				//=============================
				$("input").keypress(function(event) {
				    if (event.which == 13) {
				        event.preventDefault();
				        $("addcomments.form").submit();
				    }
				});
				function initEvents(){
					//if we mouse over a photo, show the description sored in the alt attr
					$pg_photos_elem.bind('mouseenter',function(e){
						var $e		= $(this);
							$img	= $e.find('img'),
							descr	= 'Clique para escrever um comentário.<br/><br/>Enter para enviar.'
						
						$('<span class="addComment" style="border-radius: 5px;padding: 10px;">'+ descr +'</span>').hide().insertAfter($img).fadeIn();
					}).bind('mouseleave',function(e){
						var $e		= $(this);
							$descr	= $e.find('span');
						$(this).bind('click',addCommentHandler)

						$descr.fadeOut();
				}).bind('click',addCommentHandler);


				
					//slide as we scroll with the mouse
						$pg_container.mousewheel(function(e, delta) {
						var speed	= 450,
							inc 	= -delta*speed,
								min	= $slider.slider('option','min'),
								max = $slider.slider('option','max');
							
							var val = $slider.slider('value') + inc;
							if(val < min)
								val = min;
							else if(val > max)
								val = max;
							
							$slider.slider('value', val);
						$pg_photos.stop().animate({
								left	: -(val) + 'px'
						},800,'easeOutExpo',function(){
							if(is_safari){
								$pg_container.addClass('flat')
											 .removeClass('turnLeft turnRight');
							}	
						});
						if(is_safari){
							if(delta < 0 && !$pg_container.hasClass('turnLeft'))	
								$pg_container.addClass('turnLeft')
											 .removeClass('turnRight flat');
							else if(delta > 0 && !$pg_container.hasClass('turnRight'))	
								$pg_container.addClass('turnRight')
											 .removeClass('turnLeft flat');
						}
							return false;
						});
						
						//$(window).hashchange( function(){
						//the index in the url hash
						//	var idx 			= location.hash.split('#')[1];
						//if(!idx){
							//we assume the current is the first one,
							//so set the first thumb nav elem as selected
//							$thumbnailSlider.thumbnailSlider('update',0);
							//return;
						//}
						//set the thumb nav elem as selected
//						$thumbnailSlider.thumbnailSlider('update',idx-1);
						//based on the current left value for the pg_photos, 
						//and the left of the element, we know how much to slide
//							var	current_left 	= parseFloat($pg_photos.css('left'),10),
//							elem_left		= $pg_photos_elem.eq(idx-1).offset().left;
						//update the ui slider 
//							$slider.slider('value',Math.abs(parseInt(current_left - elem_left,10)));
						//slide to element
//							$pg_photos.stop().animate({
//								left	: current_left - elem_left + 'px'
//							},800,'easeInOutExpo');
//						});
					}
			});

			$(document).ready(function() {
				$('a.login-window').click(function() {
					
			                //Getting the variable's value from a link 
					var loginBox = $(this).attr('href');

					//Fade in the Popup
					$(loginBox).fadeIn(300);
					
					//Set the center alignment padding + border see css style
					var popMargTop = ($(loginBox).height() + 24) / 2; 
					var popMargLeft = ($(loginBox).width() + 24) / 2; 
					
					$(loginBox).css({ 
						'margin-top' : -popMargTop,
						'margin-left' : -popMargLeft
					});
					
					// Add the mask to body
					$('body').append('<div id="mask"></div>');
					$('#mask').fadeIn(300);
					
					return false;
				});

				$('a.upload-window').click(function() {
					
			                //Getting the variable's value from a link 
					var uploadBox = $(this).attr('href');

					//Fade in the Popup
					$(uploadBox).fadeIn(300);
					
					//Set the center alignment padding + border see css style
					var popMargTop = ($(uploadBox).height() + 24) / 2; 
					var popMargLeft = ($(uploadBox).width() + 24) / 2; 
					
					$(uploadBox).css({ 
						'margin-top' : -popMargTop,
						'margin-left' : -popMargLeft
					});
					
					// Add the mask to body
					$('body').append('<div id="mask"></div>');
					$('#mask').fadeIn(300);
					
					return false;
				});

				$('a.contact-window').click(function() {
					
			                //Getting the variable's value from a link 
					var contactBox = $(this).attr('href');

					//Fade in the Popup
					$(contactBox).fadeIn(300);
					
					//Set the center alignment padding + border see css style
					var popMargTop = ($(contactBox).height() + 24) / 2; 
					var popMargLeft = ($(contactBox).width() + 24) / 2; 
					
					$(contactBox).css({ 
						'margin-top' : -popMargTop,
						'margin-left' : -popMargLeft
					});
					
					// Add the mask to body
					$('body').append('<div id="mask"></div>');
					$('#mask').fadeIn(300);
					
					return false;
				});
				
				// When clicking on the button close or the mask layer the popup closed
				$('a.close, #mask').live('click', function() { 
				  $('#mask , .login-popup').fadeOut(300 , function() {
					$('#mask').remove();  
					}); 
				  $('#mask , .upload-popup').fadeOut(300 , function() {
					$('#mask').remove();  
					}); 
				  $('#mask , .contact-popup').fadeOut(300 , function() {
					$('#mask').remove();  
					});
				return false;
				});
			});
        </script>
    </body>
</html>